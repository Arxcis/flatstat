<!DOCTYPE html5>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Flatstat | Spec</title>
    <link rel="stylesheet" type="text/css" href="../index.css"></link>
    <link rel="stylesheet" type="text/css" href="./spec.css"></link>
</head>
  <body>
    <header>
      <a href="/"><h1 id="title" title="Flatstat | Spec">flatstat</h1></a>
      <nav>
        <a href="/#window" title="Graphs">graph</a>
        <a href="/list/?filter=x11-only" title="List">list</a>
        <a href="/spec/" title="Spec">spec</a>
        <a href="/about/" title="About">about</a>
      </nav>
    </header>
    <main>
      <nav>
        <a id="#achievements" title="Flatpak achievements" href="/spec/#achievements">achievements</a>
        <a id="#holes" title="Flatpak holes" href="/spec/#holes">holes</a>
      </nav>

      <section>

        <article id="achievements">
         <h3 id="achievements-wayland-with-fallback" title="wayland-with-fallback">🏅 Achievement: --socket=wayland and --socket=fallback-x11</h3>
          <p>If the user is in a Wayland session, your app does not have access to x11. At the same time your app remain backwards-compatible with x11-users. It is important to stay backwards compatible, giving x11-users access to the Flatpak ecosystem.</p>

          <h3 id="achievements-no-filesystem-all" title="no-filesystem-all">🏅 Achievement: --no-filesystem-all</h3>
          <p>Your app does not ask for blanket access to the filesystem. Your app may have an explicit list of files and directories it depends on.</p>

          <h3 id="achievements-no-filesystem-at-all" title="no-filesystem-at-all">🏅 Achievement: --no-filesystem-at-all</h3>
          <p>Your app does not ask for any filesystem permissions up front, leaving the user in full control of which files the app is given access to. If implemented correctly, the app should use the <a href="https://flatpak.github.io/xdg-desktop-portal/portal-docs.html#gdbus-org.freedesktop.portal.FileChooser" target="_blank" title="org.freedesktop.portal.FileChooser">FileChooser-portal</a>. This will ensure that the user experience is the same as if the app had --filesystem=host, but without the security hole.</p>

          <h3 id="achievements-no-device-all" title="no-device-all">🏅 Achievement: --no-device-all</h3>
          <p>Your app does not ask for blanket access to the users devices. Your app may have an explicit list of devices it depends on.</p>

          <h3 id="achievements-no-device-at-all" title="no-device-at-all">🏅 Achievement: --no-device-at-all</h3>
          <p>Your app does not ask for any device permissions up front, leaving the user in full control of which devices the app is given access to.</p>
        </article>
        
        <article id="holes"> 
          <h3 id="holes-window-all" title="window-all">💥 Hole: --socket=x11 </h3>
          <p>Your app has x11 access. x11 does not support isolation between apps, which enables your app to see what a user is doing in other apps. E.g keylogging, screen capture.</p>

          <h3 id="holes-filesystem-all" title="filesystem-all">💥 Hole: --filesystem=home or --filesystem=host</h3>
          <p>Your app has blanket access to all of the user's private files. E.g. ~/.ssh, ~/Desktop/passwords.txt</p>

          <h3 id="holes-device-all" title="device-all">💥 Hole: --device=all</h3>
          <p>Your app has blanket access to all of the user's connected devices. E.g. microphone, camera, graphics driver.</p>

          <h3 id="holes-audio-all" title="audio-all">💥 Hole: --socket=pulseaudio</h3>
          <p>Your app has pulseaudio access. Pulseaudio does not support isolation between app. Your app can listen to whatever happens in other apps. Your app can listen to the microphone without asking the user. Your app can play sound without asking the user.</p>
        </article>

      </section>
    </main>
  </body>
  <script type="module">
    const headerLink = document.querySelector(`header nav a[href*='spec']`)
    headerLink?.classList.add("current")

   // Check if any a[href] contains the search, and mark them as active
   const graphLink = document.getElementById(window.location.hash)
    if (graphLink) {
      graphLink.classList.add("current")
    } else {
      document.getElementById("#achievements").classList.add("current");
    }

    window.addEventListener("hashchange", () => {
      const links = document.querySelectorAll("main nav a")
      for (const link of links) link.classList.remove("current")

      const graphLink = document.getElementById(window.location.hash)
      graphLink?.classList.add("current")
    })

    // Inject counts for achievements and holes
    
  </script>
</html>
